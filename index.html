<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Title of the document</title>
<link rel="stylesheet" type="text/css" href="css/main.css">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, shrink-to-fit=no">
</head>

<body>
<div id="particles-js"></div>
<!-- stats - count particles -->
<div class="count-particles">
  <span class="js-count-particles">--</span> particles
</div>

<div class="circle">
<div class="header-text">header text</div>
</div>
<div id="sphere" style="top: 0px; left: 0px;"></div>
<ul id="stats-orrientation">
	<li>acceleration x: <span id="accelerationX"></span>g</li>
	<li>acceleration y: <span id="accelerationY"></span>g</li>
	<li>acceleration z: <span id="accelerationZ"></span>g</li>
	<li>rotation alpha: <span id="rotationAlpha"></span>degree</li>
	<li>rotation beta: <span id="rotationBeta"></span>degree</li>
	<li>rotation gamma: <span id="rotationGamma"></span>degree</li>
</ul>
</body>

<script src="scripts/particles.js"></script>
<script src="https://threejs.org/examples/js/libs/stats.min.js"></script>

<script>
    particlesJS("particles-js", {
  "particles": {
    "number": {
      "value": 1,
      "density": {
        "enable": false,
        "value_area": 200
      }
    },
    "color": {
      "value": "#ffffff"
    },
    "shape": {
      "type": "image",
      "stroke": {
        "width": 0,
        "color": "#000000"
      },
      "polygon": {
        "nb_sides": 3
      },
      "image": {
        // "src": "http://www.pandora.net/assets/content?sku=792075ENMX&format=png&width=124&height=124&hash=3F6EDB987EFFD59D09C27BAB7F417E624C2D694E",
        "src": "heart.png",
        "width": 50,
        "height": 50
      }
    },
    "opacity": {
      "value": 1,
      "random": false,
      "anim": {
        "enable": false,
        "speed": 1,
        "opacity_min": 0.1,
        "sync": false
      }
    },
    "size": {
      "value": 15,
      "random": false,
      "anim": {
        "enable": false,
        "speed": 10,
        "size_min": 10,
        "sync": false
      }
    },
    "line_linked": {
      "enable": false,
      "distance": 150,
      "color": "#ffffff",
      "opacity": 0.4,
      "width": 1
    },
    "move": {
      "enable": true,
      "speed": 3,
      "direction": "none",
      "random": true,
      "straight": true,
      "out_mode": "out",
      "bounce": false,
      "attract": {
        "enable": false,
        "rotateX": 600,
        "rotateY": 1200
      }
    }
  },
  "interactivity": {
    "detect_on": "canvas",
    "events": {
      "onhover": {
        "enable": true,
        "mode": "repulse"
      },
      "onclick": {
        "enable": false,
        "mode": "repulse"
      },
      "resize": true
    },
    "modes": {
      "grab": {
        "distance": 400,
        "line_linked": {
          "opacity": 1
        }
      },
      "bubble": {
        "distance": 400,
        "size": 40,
        "duration": 2,
        "opacity": 8,
        "speed": 3
      },
      "repulse": {
        "distance": 150,
        "duration": 0.4
      },
      "push": {
        "particles_nb": 4
      },
      "remove": {
        "particles_nb": 2
      }
    }
  },
  "retina_detect": true
});
</script>

<script type="text/javascript">
var count_particles, stats, update;
stats = new Stats;
stats.setMode(0);
stats.domElement.style.position = 'absolute';
stats.domElement.style.left = '0px';
stats.domElement.style.top = '0px';
document.body.appendChild(stats.domElement);
count_particles = document.querySelector('.js-count-particles');
update = function() {
  stats.begin();
  stats.end();
  if (window.pJSDom[0].pJS.particles && window.pJSDom[0].pJS.particles.array) {
    count_particles.innerText = window.pJSDom[0].pJS.particles.array.length;
  }
  requestAnimationFrame(update);
};
requestAnimationFrame(update);
</script>

<script type="text/javascript">
var canvasWidth = document.getElementById("particles-js").offsetWidth,
    canvasHeight = document.getElementById("particles-js").offsetHeight,
    runOnce = true,
    removeParticle = function() {
    if (window.pJSDom[0].pJS.particles && window.pJSDom[0].pJS.particles.array) {
        if(window.pJSDom[0].pJS.particles.array.length >= 1){
          for (element = 0; element < window.pJSDom[0].pJS.particles.array.length; ++element) {
            var particleX = window.pJSDom[0].pJS.particles.array[element].x / 2,
                particleY = window.pJSDom[0].pJS.particles.array[element].y / 2,
                particleWidth = 10,
                horizontalOut = (particleX - (particleWidth / 2)) >= canvasWidth  || (particleX + (particleWidth / 2)) <= 0,
                verticalOut = (particleY - (particleWidth / 2)) >= canvasHeight || (particleY + (particleWidth / 2)) <= 0;            
            if( horizontalOut || verticalOut) {                
                window.pJSDom[0].pJS.particles.array.splice(element,1);
                window.pJSDom[0].pJS.particlesDraw;
                console.log(element + " Particle removed");
            }
          };
        } else {
          console.log("no more particles")
        };
    }
    requestAnimationFrame(removeParticle);
};
console.clear();
requestAnimationFrame(removeParticle);
</script>
<!--<script type="text/javascript">
setTimeout(function(){ 
  window.pJSDom[0].pJS.particles.move.direction = "bottom";
  window.pJSDom[0].pJS.fn.particlesUpdate();
 }, 3000);
</script>-->
<script type="text/javascript">

var x = 0, y = 0,
    vx = 0, vy = 0,
	ax = 0, ay = 0,
  sensitivity= 1;
	
var sphere = document.getElementById("sphere");

if (window.DeviceMotionEvent != undefined) {
	window.ondevicemotion = function(e) {
		ax = event.accelerationIncludingGravity.x * sensitivity;
		ay = event.accelerationIncludingGravity.y * sensitivity;
		document.getElementById("accelerationX").innerHTML = e.accelerationIncludingGravity.x;
		document.getElementById("accelerationY").innerHTML = e.accelerationIncludingGravity.y;
		document.getElementById("accelerationZ").innerHTML = e.accelerationIncludingGravity.z;

		if ( e.rotationRate ) {
			document.getElementById("rotationAlpha").innerHTML = e.rotationRate.alpha;
			document.getElementById("rotationBeta").innerHTML = e.rotationRate.beta;
			document.getElementById("rotationGamma").innerHTML = e.rotationRate.gamma;
		}		
	}

	setInterval( function() {
		var landscapeOrientation = window.innerWidth/window.innerHeight > 1;
		if ( landscapeOrientation) {
			vx = vx + ay;
			vy = vy + ax;
		} else {
			vy = vy - ay;
			vx = vx + ax;
		}
		vx = vx * 0.98;
		vy = vy * 0.98;
		y = parseInt(y + vy / 50);
		x = parseInt(x + vx / 50);
		
		boundingBoxCheck();
		
		sphere.style.top = y + "px";
		sphere.style.left = x + "px";
if (window.pJSDom[0].pJS.particles && window.pJSDom[0].pJS.particles.array) {
        if(window.pJSDom[0].pJS.particles.array.length >= 1){
          for (element = 0; element < window.pJSDom[0].pJS.particles.array.length; ++element) {
    window.pJSDom[0].pJS.particles.array[element].x = window.pJSDom[0].pJS.particles.array[element].x + x;
    window.pJSDom[0].pJS.particles.array[element].y = window.pJSDom[0].pJS.particles.array[element].y + y;		
          }}}
    window.pJSDom[0].pJS.fn.particlesUpdate();
	}, 25);
} 


function boundingBoxCheck(){
	if (x<0) { x = 0; vx = -vx; }
	if (y<0) { y = 0; vy = -vy; }
	if (x>document.documentElement.clientWidth-20) { x = document.documentElement.clientWidth-20; vx = -vx; }
	if (y>document.documentElement.clientHeight-20) { y = document.documentElement.clientHeight-20; vy = -vy; }
	
}

</script>
</html>